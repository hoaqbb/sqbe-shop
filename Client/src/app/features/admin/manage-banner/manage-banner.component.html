<div class="d-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-dark">Quản lý banner</h1>
</div>

<div class="card" *ngIf="banners">
  <p-table #dt [value]="banners" [rowHover]="true">
    <ng-template pTemplate="caption">
      <!-- form thêm banner -->
      <div [hidden]="!isCreateFormVisible">
        <div class="d-flex justify-content-end">
          <i
            class="pi pi-times cursor-pointer mx-3"
            (click)="manageCreateForm()"
          ></i>
        </div>
        <app-create-banner></app-create-banner>
      </div>

      <div class="d-flex justify-content-end">
        <button
          class="btn btn-success"
          (click)="manageCreateForm()"
          [hidden]="isCreateFormVisible || isUpdateFormVisible"
        >
          Thêm banner <i class="pi pi-plus"></i>
        </button>
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>Id</th>
        <th>Ảnh</th>
        <th>Đường dẫn liên kết</th>
        <th>Kiểu hiển thị</th>
        <th>Ngày bắt đầu</th>
        <th>Ngày kết thúc</th>
        <th pSortableColumn="createAt">
          Ngày tạo<p-sortIcon field="createAt" />
        </th>
        <th>Ngày cập nhật</th>
        <th pSortableColumn="status">
          Trạng thái <p-sortIcon field="status" />
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-banner>
      <tr>
        <td>
          {{ banner.id }}
        </td>
        <td>
          <img style="width: 100px" [src]="banner.imageUrl" />
        </td>
        <td>
          {{ banner.linkUrl }}
        </td>
        <td>
          @switch (banner.displayType) { @case (0) { Slider } @case (1) {
          Standee } @case (2) { Hero } }
        </td>
        <td>
          {{ banner.startDate | date : "dd/MM/yyyy" }}
        </td>
        <td>
          {{ banner.endDate | date : "dd/MM/yyyy" }}
        </td>
        <td>
          {{ banner.createAt | date : "dd/MM/yyyy HH:mm a" }}
        </td>
        <td>
          {{ banner.updateAt | date : "dd/MM/yyyy HH:mm a" }}
        </td>

        <td>
          @switch (banner.isActive) { @case (true) {
          <p-button
            icon="pi pi-check"
            [rounded]="true"
            [text]="true"
            severity="success"
          />
          } @case (false) {
          <p-button
            icon="pi pi-times"
            [rounded]="true"
            [text]="true"
            severity="danger"
          />
          } }
        </td>

        <td>
          <p-button
            icon="pi pi-pencil"
            [style]=""
            [rounded]="true"
            [outlined]="true"
            severity="success"
            (onClick)="showUpdateProductDialog(product.id)"
          />

          <p-button
            icon="pi pi-trash"
            severity="danger"
            [rounded]="true"
            [outlined]="true"
            (onClick)="deleteConfirmationDialog(product.id)"
          />
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-confirmDialog />
